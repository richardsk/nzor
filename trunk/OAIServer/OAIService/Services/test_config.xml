<?xml version="1.0" encoding="utf-8" ?>
<Services>
  <Service name="test">
    <AdminEmail>richardsk@landcareresearch.co.nz</AdminEmail>

    <Sets>
      <Set name="Metadata"/>
      <Set name="TaxonName"/>
      <Set name="TaxonProperty"/>
      <Set name="TaxonConcept"/>
      <Set name="Publication"/>
    </Sets>
    
    <MetadataFormats>
      <MetadataFormat prefix="nzor" uri="C:\Development\NZOR\Dev\OAIServer\OAIService\Config\nzor_provider.xsd" mappingFile="nzor_mapping.xml" />        
    </MetadataFormats>

    <DataConnections>
      <DataConnection set="TaxonName">
        <DBConnectionString>Provider=SQLOLEDB;data source=devserver05;integrated security=SSPI;initial catalog=PlantNames_Dev;persist security info=true</DBConnectionString>
        <Table id="1" name="tblName" alias="" pk="NameGuid">
          <TableJoin id="2" name="tblTaxonRank" alias="" pk="TaxonRankPk" type="inner" fkFrom="NameTaxonRankFk" fkTo="TaxonRankPk">        
          </TableJoin>
          <TableJoin id="3" name="tblID" alias="" pk="Pk" type="inner" fkFrom="NameGuid" fkTo="ID" orderby="Counter"></TableJoin>
        </Table>
        <Mappings>
          <Mapping type="SQLMinValueMapping" field="[EARLIEST_DATE]" table="1" column="NameUpdatedDate" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[IDENTIFIER]" table="1" column="NameGuid" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[RESUMPTION_COLUMN]" table="3" column="Counter" columnAlias="" sql="" datatype=""/>
          <Mapping type="DatabaseMapping" field="[RECORD_STATUS]" table="" column="" columnAlias="Status" sql="(case when tblName.NameSuppress = 1 then 'deleted' else '' end)" datatype="" />
          <Mapping type="DatabaseMapping" field="[RECORD_DATE]" table="1" column="NameUpdatedDate" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[NameFull]" table="1" column="NameFull" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[Rank]" table="2" column="TaxonRankName" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[Canonical]" table="1" column="NameCanonical" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[Uninomial]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[Genus]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[InfragenericEpithet]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[SpecificEpithet]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[InfraspecificEpithet]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[Cultivar]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[Authorship]" table="1" column="NameAuthors" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[BasionymAuthors]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[CombiningAuthors]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[Year]" table="1" column="NameYearOnPublication" columnAlias="" sql="" datatype="" />
        </Mappings>
      </DataConnection>

      <DataConnection set="TaxonConcept">
        <DBConnectionString>Provider=SQLOLEDB;data source=devserver05;integrated security=SSPI;initial catalog=PlantNames_Dev;persist security info=true</DBConnectionString>
        <Table id="1" name="tblBibliography" alias="" pk="BibliographyGuid">
          <TableJoin id="2" name="tblName" alias="" pk="NameGuid" type="inner" fkFrom="BibliographyNameFk" fkTo="NameGuid">            
          </TableJoin>
          <TableJoin id="3" name="tblReference" alias="" pk="ReferenceID" type="inner" fkFrom="BibliographyReferenceFk" fkTo="ReferenceID">
          </TableJoin>
        </Table>
        <Mappings>
          <Mapping type="SQLMinValueMapping" field="[EARLIEST_DATE]" table="1" column="BibliographyUpdatedDate" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[IDENTIFIER]" table="1" column="BibliographyGuid" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[RECORD_STATUS]" table="" column="" columnAlias="Status" sql="(case when tblBibliography.BibliographyIsDeleted = 1 then 'deleted' else '' end)" datatype="" />
          <Mapping type="DatabaseMapping" field="[RECORD_DATE]" table="1" column="BibliographyUpdatedDate" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[Name]" table="1" column="BibliographyNameFk" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[AccordingTo]" table="1" column="BibliographyReferenceFk" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[Rank]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[AcceptedConcept]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[AcceptedConceptProvider]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[AcceptedConceptInUse]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[ParentConcept]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[ParentConceptProvider]" table="1" column="" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[ParentConceptInUse]" table="1" column="" columnAlias="" sql="" datatype="" />
        </Mappings>
      </DataConnection>

      <DataConnection set="Publication">
        <DBConnectionString>Provider=SQLOLEDB;data source=devserver05;integrated security=SSPI;initial catalog=PlantNames_Dev;persist security info=true</DBConnectionString>
        <Table id="1" name="tblReference" alias="" pk="ReferenceID">          
        </Table>
        <Mappings>
          <Mapping type="SQLMinValueMapping" field="[EARLIEST_DATE]" table="1" column="ReferenceUpdatedDate" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[IDENTIFIER]" table="1" column="ReferenceID" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[RECORD_STATUS]" table="" column="" columnAlias="Status" sql="(case when tblReference.ReferenceIsDeleted = 1 then 'deleted' else '' end)" datatype="" />
          <Mapping type="DatabaseMapping" field="[RECORD_DATE]" table="1" column="ReferenceUpdatedDate" columnAlias="" sql="" datatype="" />
          <Mapping type="DatabaseMapping" field="[Citation]" table="1" column="ReferenceGenCitation" columnAlias="" sql="" datatype="" />
          
        </Mappings>
      </DataConnection>
    </DataConnections>

  </Service>
  
</Services>