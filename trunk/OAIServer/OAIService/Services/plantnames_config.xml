<?xml version="1.0" encoding="utf-8" ?>
<Services>
  <Service name="plant_names">
    <AdminEmail>richardsk@landcareresearch.co.nz</AdminEmail>
    <ProviderId>NZFLORA</ProviderId>
    <ProviderName>New Zealand Plant Names Database</ProviderName>
    <OrganisationUrl>http://nzflora.landcareresearch.co.nz</OrganisationUrl>
    <MetadataDate>2010-03-10</MetadataDate>
    <Disclaimer></Disclaimer>
    <Attribution></Attribution>
    <Licensing></Licensing>

    <Sets>
      <Set name="Metadata"/>
      <Set name="TaxonName"/>
      <Set name="TaxonProperty"/>
      <Set name="TaxonConcept"/>
      <Set name="Publication"/>
    </Sets>

    <MetadataFormats>
      <MetadataFormat prefix="nzor" uri="C:\Development\NZOR\Dev\OAIServer\OAIService\Config\nzor_provider.xsd" mappingFile="nzor_mapping.xml" />
    </MetadataFormats>

    <DataConnections>
      <DataConnection set="TaxonName">
        <DBConnectionString>Provider=SQLOLEDB;data source=devserver04\sql2005;integrated security=SSPI;initial catalog=PlantName_Cache;persist security info=true</DBConnectionString>
        <Table id="1" name="Name" alias="" pk="NameId">
          <TableJoin id="2" name="OAI" alias="" pk="OAI_ID" type="inner" fkFrom="NameId" fkTo="TableId" joinCondition="OAI.TableName='Name'"></TableJoin>          
        </Table>
        <Mappings>
          <Mapping type="SQLMinValueMapping" field="[EARLIEST_DATE]" table="1" column="ModifiedDate" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[IDENTIFIER]" table="1" column="NameId" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[RESUMPTION_COLUMN]" table="2" column="Counter" columnAlias="" sql="" orderBy="Counter" fixedAttributes=""/>
          <!--Mapping type="DatabaseMapping" field="[RECORD_STATUS]" table="" column="" columnAlias="Status" sql="(case when tblName.NameSuppress = 1 then 'deleted' else '' end)" fixedAttributes="" /-->
          <Mapping type="DatabaseMapping" field="[RECORD_DATE]" table="1" column="ModifiedDate" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[NameFull]" table="1" column="NameFull" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[Rank]" table="1" column="Rank" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[Canonical]" table="1" column="CanonicalSimple" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[Uninomial]" table="1" column="CanonicalUninomial" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[Genus]" table="1" column="CanonicalGenus" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[InfragenericEpithet]" table="1" column="CanonicalInfragenericEpithet" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[SpecificEpithet]" table="1" column="CanonicalSpecificEpithet" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[InfraspecificEpithet]" table="1" column="CanonicalInfraspecificEpithet" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[Cultivar]" table="1" column="CanonicalCultivarNameGroup" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[Authorship]" table="1" column="Authorship" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[BasionymAuthors]" table="1" column="BasionymAuthors" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[CombiningAuthors]" table="1" column="CombiningAuthors" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[Year]" table="1" column="Year" columnAlias="" sql="" fixedAttributes="" />
          
        </Mappings>
      </DataConnection>

      <DataConnection set="TaxonConcept">
        <DBConnectionString>Provider=SQLOLEDB;data source=devserver04\sql2005;integrated security=SSPI;initial catalog=PlantName_Cache;persist security info=true</DBConnectionString>
        <Table id="1" name="Concept" alias="" pk="ConceptId">
          <TableJoin id="2" name="Name" alias="" pk="NameId" type="inner" fkFrom="NameId" fkTo="NameId">
          </TableJoin>
          <!--TableJoin id="3" name="Re" alias="" pk="ReferenceID" type="inner" fkFrom="BibliographyReferenceFk" fkTo="ReferenceID"></TableJoin-->
        </Table>
        <Mappings>
          <Mapping type="SQLMinValueMapping" field="[EARLIEST_DATE]" table="1" column="ModifiedDate" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[IDENTIFIER]" table="1" column="ConceptId" columnAlias="" sql="" fixedAttributes="" />
          <!--Mapping type="DatabaseMapping" field="[RECORD_STATUS]" table="" column="" columnAlias="Status" sql="(case when tblBibliography.BibliographyIsDeleted = 1 then 'deleted' else '' end)" fixedAttributes="" /-->
          <Mapping type="DatabaseMapping" field="[RECORD_DATE]" table="1" column="ModifiedDate" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[ConceptId]" table="1" column="ConceptId" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[NameId]" table="1" column="NameId" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[AccordingToId]" table="1" column="AccordingToId" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[Rank]" table="1" column="" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[AcceptedConceptId]" table="1" column="AcceptedConceptId" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[AcceptedConceptProviderId]" table="1" column="" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[AcceptedConceptInUse]" table="1" column="AcceptedConceptInUse" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[ParentConceptId]" table="1" column="ParentConceptId" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[ParentConceptProviderId]" table="1" column="" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[ParentConceptInUse]" table="1" column="ParentConceptInUse" columnAlias="" sql="" fixedAttributes="" />
        </Mappings>
      </DataConnection>

      <DataConnection set="Publication">
        <DBConnectionString>Provider=SQLOLEDB;data source=devserver04\sql2005;integrated security=SSPI;initial catalog=PlantName_Cache;persist security info=true</DBConnectionString>
        <Table id="1" name="Publication" alias="" pk="PublicationID">
          <TableJoin id="2" name="PublicationTitle" alias="" pk="PublicationId" type="left" fkFrom="PublicationId" fkTo="PublicationId">            
          </TableJoin>
        </Table>
        <Mappings>
          <Mapping type="SQLMinValueMapping" field="[EARLIEST_DATE]" table="1" column="ModifiedDate" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[IDENTIFIER]" table="1" column="PublicationID" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[RECORD_STATUS]" table="" column="" columnAlias="Status" sql="(case when Publication.IsDeleted = 1 then 'deleted' else '' end)" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[RECORD_DATE]" table="1" column="ModifiedDate" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[Citation]" table="1" column="Citation" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[PublicationTitle]" table="2" column="Title" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[PublicationTitleType]" table="2" column="type" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[PublicationTitleLevel]" table="2" column="Level" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[PublicationAuthors]" table="1" column="AuthorsSimple" columnAlias="" sql="" fixedAttributes="" />
          <Mapping type="DatabaseMapping" field="[DateOfPublication]" table="1" column="DateOfPublication" columnAlias="" sql="" fixedAttributes="type='of publication'" />
          <Mapping type="DatabaseMapping" field="[DateOnPublication]" table="1" column="DateOnPublication" columnAlias="" sql="" fixedAttributes="type='on publication'" />

        </Mappings>
      </DataConnection>

      <DataConnection set="Metadata">
        <Mappings>
          <Mapping type="FixedValueMapping" field="[ProviderId]" fixedAttributes="" value="" serviceProperty="[ProviderId]" />
          <Mapping type="FixedValueMapping" field="[ProviderName]" fixedAttributes="" value="" serviceProperty="[ProviderName]" />
          <Mapping type="FixedValueMapping" field="[OrganisationUrl]" fixedAttributes="" value="" serviceProperty="[OrganisationUrl]" />
          <Mapping type="FixedValueMapping" field="[MetadataDate]" fixedAttributes="" value="" serviceProperty="[MetadataDate]" />
          <Mapping type="FixedValueMapping" field="[Disclaimer]" fixedAttributes="" value="" serviceProperty="[Disclaimer]" />
          <Mapping type="FixedValueMapping" field="[Attribution]" fixedAttributes="" value="" serviceProperty="[Attribution]" />
          <Mapping type="FixedValueMapping" field="[Licensing]" fixedAttributes="" value="" serviceProperty="[Licensing]" />
        </Mappings>
      </DataConnection>
    </DataConnections>

  </Service>

</Services>